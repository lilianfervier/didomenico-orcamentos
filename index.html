<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dra. Emi Di Domenico De Leon</title>

<style>
body{
  margin:0;
  padding:20px;
  font-family:'Inter',sans-serif;
  background:#f4eee8;
}
.container{
  max-width:900px;
  margin:auto;
  background:#fffaf5;
  padding:30px;
  border-radius:12px;
  border:1px solid #d6c3b2;
}
.logo-canto{
  position:fixed;
  top:20px;
  right:20px;
  width:80px;
  opacity:.9;
}
h1{text-align:center;font-family:'Playfair Display',serif;color:#6b4f3f;}
h1 small{display:block;margin-top:6px;font-size:15px;color:#8a6a55;}
details{margin-bottom:10px;border-left:4px solid #c2a78f;padding-left:10px;}
summary{padding:10px;background:#e6d6c9;border-radius:6px;cursor:pointer;font-weight:600;}
label{display:block;padding:6px 0;cursor:pointer;}
.resultado{margin-top:30px;border-top:1px solid #d6c3b2;padding-top:20px;}
.linha{display:flex;justify-content:space-between;margin:8px 0;}
.linha.destaque span{color:#b00020;}
.linha.economia span{color:#1b7f3a;}
button{padding:10px 15px;border:none;border-radius:6px;background:#6b4f3f;color:white;cursor:pointer;margin:5px;}
button:hover{opacity:.9;}
.apresentacao details,.apresentacao summary,.apresentacao label,.apresentacao .acoes{display:none;}
</style>
</head>

<body>

<img src="logo.png" class="logo-canto">

<main class="container">

<h1>
Dra. Emi Di Domenico De Leon
<small>Clínica Médica Di Domenico – Advanced Medicine</small>
</h1>

<section id="procedimentos"></section>

<section class="resultado">
<h2>Orçamento</h2>

<button id="btnPDF">Gerar PDF</button>

<div id="selecionados"></div>

<div class="linha">
  <span>Total</span><strong id="total">R$ 0,00</strong>
</div>
<div class="linha destaque">
  <span>À vista</span><strong id="avista">R$ 0,00</strong>
</div>
<div class="linha">
  <span>Economia</span><strong id="economia">R$ 0,00</strong>
</div>
<div class="linha">
  <span>Parcelado</span><strong id="parcelado">-</strong>
</div>
</section>

</main>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
// Seções e itens
const secoes = [
  {titulo:"Taxas e anestesias", itens:[["Taxa de Sala",550],["Consulta",880],["Carbox (sessão)",715]]},
  {titulo:"Cirúrgicos", itens:[["Hialuronidase",1800],["Exérese de Lesão",1900],["Subcisão",3300]]}
];

const container = document.getElementById("procedimentos");
const selecionadosDiv = document.getElementById("selecionados");
let selecionados=[];

// Criar checklist
secoes.forEach(secao=>{
  const details=document.createElement("details");
  const summary=document.createElement("summary");
  summary.textContent=secao.titulo;
  details.appendChild(summary);
  secao.itens.forEach(item=>{
    const label=document.createElement("label");
    label.innerHTML=`<input type="checkbox" data-nome="${item[0]}" data-valor="${item[1]}"> ${item[0]} — R$ ${item[1]}`;
    label.querySelector("input").addEventListener("change",atualizar);
    details.appendChild(label);
  });
  container.appendChild(details);
});

// Atualizar selecionados
function atualizar(){
  selecionados=[];
  document.querySelectorAll("input:checked").forEach(i=>{
    selecionados.push({nome:i.dataset.nome,valor:Number(i.dataset.valor)});
  });
  render();
}

// Renderizar lista e totais
function render(){
  let total=0;
  selecionadosDiv.innerHTML="";
  selecionados.forEach(item=>{
    total+=item.valor;
    const d=document.createElement("div");
    d.textContent=`${item.nome} - R$ ${item.valor}`;
    selecionadosDiv.appendChild(d);
  });

  const avista=total*0.97, economia=total-avista;

  document.getElementById("total").textContent = total.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});
  document.getElementById("avista").textContent = avista.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});
  document.getElementById("economia").textContent = economia.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});
  document.getElementById("parcelado").textContent = total>10000 ? `10x de ${(total/10).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}` : `6x de ${(total/6).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}`;
}

// PDF
document.getElementById("btnPDF").onclick=()=>{ html2pdf().from(document.querySelector(".container")).save("orcamento.pdf"); };
</script>

</body>
</html>
